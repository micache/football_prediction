<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ERC20 Allowance Manager</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="container">
      <h1>ERC20 Allowance Manager</h1>
      <p class="hint">
        Connect your wallet, select the ERC20 token contract, and approve another
        account to spend your tokens.
      </p>

      <section class="card">
        <h2>Wallet Connection</h2>
        <div class="row">
          <button id="connectWallet" type="button">Connect Wallet</button>
          <button id="disconnectWallet" type="button" class="secondary">Disconnect</button>
          <span id="accountDisplay" class="muted">Not connected</span>
        </div>
        <p id="networkDisplay" class="muted"></p>
      </section>

      <section class="card">
        <h2>Token Details</h2>
        <label class="field">
          <span>Token Contract Address</span>
          <input id="tokenAddress" placeholder="0x..." />
        </label>
        <button id="loadToken" type="button">Load Token</button>
        <p id="tokenInfo" class="muted"></p>
      </section>

      <section class="card">
        <h2>Transfer Tokens</h2>
        <label class="field">
          <span>Recipient Address</span>
          <input id="recipientAddress" placeholder="0x..." />
        </label>
        <label class="field">
          <span>Amount to Transfer</span>
          <input id="transferAmount" type="number" min="0" step="any" placeholder="0.0" />
        </label>
        <button id="transferBtn" type="button">Transfer Tokens</button>
      </section>

      <section class="card">
        <h2>Allowance Management</h2>
        
        <div style="margin-bottom: 1.5rem;">
          <h3 style="font-size: 1rem; margin-bottom: 0.75rem;">View All Approved Spenders</h3>
          <button id="checkAllowance" class="secondary" type="button">Check All Allowances</button>
          <div id="allowanceInfo" class="allowance-info"></div>
        </div>

        <div style="border-top: 1px solid rgba(90, 118, 173, 0.25); padding-top: 1.5rem;">
          <h3 style="font-size: 1rem; margin-bottom: 0.75rem;">Approve New Spender</h3>
          <label class="field">
            <span>Spender Address</span>
            <input id="spenderAddress" placeholder="0x..." />
          </label>
          <label class="field">
            <span>Amount to Approve</span>
            <input id="approveAmount" type="number" min="0" step="any" placeholder="0.0" />
          </label>
          <button id="approve" type="button">Approve Spending</button>
        </div>
      </section>

      <section class="card">
        <h2>Transfer History</h2>
        <div class="row" style="margin-bottom: 1rem;">
          <button id="refreshHistory" class="secondary" type="button">Refresh History</button>
          <span id="historyStatus" class="muted"></span>
        </div>
        <div id="transferHistory" class="history-container">
          <p class="muted">Load a token and click refresh to see transfer history.</p>
        </div>
      </section>

      <section class="card">
        <h2>Status</h2>
        <pre id="status" class="status muted">Waiting for interaction...</pre>
      </section>
    </main>

    <!-- Load ethers.js from CDN - UMD version for browser -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.15.0/ethers.umd.min.js"></script>
    <script src="app.js"></script>
  </body>
</html>